---
read_when:
  - ä½ éœ€è¦è§£é‡Šæ™ºèƒ½ä½“å·¥ä½œåŒºæˆ–å…¶æ–‡ä»¶å¸ƒå±€
  - ä½ æƒ³å¤‡ä»½æˆ–è¿ç§»æ™ºèƒ½ä½“å·¥ä½œåŒº
summary: æ™ºèƒ½ä½“å·¥ä½œåŒºï¼šä½ç½®ã€å¸ƒå±€å’Œå¤‡ä»½ç­–ç•¥
title: æ™ºèƒ½ä½“å·¥ä½œåŒº
x-i18n:
  generated_at: "2026-02-03T07:45:49Z"
  model: claude-opus-4-5
  provider: pi
  source_hash: 84c550fd89b5f2474aeae586795485fd29d36effbb462f13342b31540fc18b82
  source_path: concepts/agent-workspace.md
  workflow: 15
---

# æ™ºèƒ½ä½“å·¥ä½œåŒº

å·¥ä½œåŒºæ˜¯æ™ºèƒ½ä½“çš„å®¶ã€‚å®ƒæ˜¯æ–‡ä»¶å·¥å…·å’Œå·¥ä½œåŒºä¸Šä¸‹æ–‡ä½¿ç”¨çš„å”¯ä¸€å·¥ä½œç›®å½•ã€‚è¯·ä¿æŒå…¶ç§å¯†æ€§å¹¶å°†å…¶è§†ä¸ºè®°å¿†ã€‚

è¿™ä¸Ž `~/.krabkrab/` æ˜¯åˆ†å¼€çš„ï¼ŒåŽè€…å­˜å‚¨é…ç½®ã€å‡­è¯å’Œä¼šè¯ã€‚

**é‡è¦ï¼š** å·¥ä½œåŒºæ˜¯**é»˜è®¤ cwd**ï¼Œè€Œä¸æ˜¯ç¡¬æ€§æ²™ç®±ã€‚å·¥å…·ä¼šæ ¹æ®å·¥ä½œåŒºè§£æžç›¸å¯¹è·¯å¾„ï¼Œä½†ç»å¯¹è·¯å¾„ä»ç„¶å¯ä»¥è®¿é—®ä¸»æœºä¸Šçš„å…¶ä»–ä½ç½®ï¼Œé™¤éžå¯ç”¨äº†æ²™ç®±éš”ç¦»ã€‚å¦‚æžœä½ éœ€è¦éš”ç¦»ï¼Œè¯·ä½¿ç”¨
[`agents.defaults.sandbox`](/gateway/sandboxing)ï¼ˆå’Œ/æˆ–æ¯æ™ºèƒ½ä½“æ²™ç®±é…ç½®ï¼‰ã€‚
å½“å¯ç”¨æ²™ç®±éš”ç¦»ä¸” `workspaceAccess` ä¸æ˜¯ `"rw"` æ—¶ï¼Œå·¥å…·åœ¨ `~/.krabkrab/sandboxes` ä¸‹çš„æ²™ç®±å·¥ä½œåŒºå†…æ“ä½œï¼Œè€Œä¸æ˜¯ä½ çš„ä¸»æœºå·¥ä½œåŒºã€‚

## é»˜è®¤ä½ç½®

- é»˜è®¤ï¼š`~/.krabkrab/workspace`
- å¦‚æžœè®¾ç½®äº† `krabkrab_PROFILE` ä¸”ä¸æ˜¯ `"default"`ï¼Œé»˜è®¤å€¼å˜ä¸º
  `~/.krabkrab/workspace-<profile>`ã€‚
- åœ¨ `~/.krabkrab/krabkrab.json` ä¸­è¦†ç›–ï¼š

```json5
{
  agent: {
    workspace: "~/.krabkrab/workspace",
  },
}
```

`krabkrab onboard`ã€`krabkrab configure` æˆ– `krabkrab setup` å°†åˆ›å»ºå·¥ä½œåŒºå¹¶åœ¨ç¼ºå¤±æ—¶å¡«å……å¼•å¯¼æ–‡ä»¶ã€‚

å¦‚æžœä½ å·²ç»è‡ªå·±ç®¡ç†å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¯ä»¥ç¦ç”¨å¼•å¯¼æ–‡ä»¶åˆ›å»ºï¼š

```json5
{ agent: { skipBootstrap: true } }
```

## é¢å¤–çš„å·¥ä½œåŒºæ–‡ä»¶å¤¹

æ—§ç‰ˆå®‰è£…å¯èƒ½åˆ›å»ºäº† `~/krabkrab`ã€‚ä¿ç•™å¤šä¸ªå·¥ä½œåŒºç›®å½•å¯èƒ½ä¼šå¯¼è‡´æ··ä¹±çš„è®¤è¯æˆ–çŠ¶æ€æ¼‚ç§»ï¼Œå› ä¸ºåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªå·¥ä½œåŒºæ˜¯æ´»åŠ¨çš„ã€‚

**å»ºè®®ï¼š** ä¿æŒå•ä¸ªæ´»åŠ¨å·¥ä½œåŒºã€‚å¦‚æžœä½ ä¸å†ä½¿ç”¨é¢å¤–çš„æ–‡ä»¶å¤¹ï¼Œè¯·å½’æ¡£æˆ–ç§»è‡³åºŸçº¸ç¯“ï¼ˆä¾‹å¦‚ `trash ~/krabkrab`ï¼‰ã€‚
å¦‚æžœä½ æœ‰æ„ä¿ç•™å¤šä¸ªå·¥ä½œåŒºï¼Œè¯·ç¡®ä¿ `agents.defaults.workspace` æŒ‡å‘æ´»åŠ¨çš„é‚£ä¸ªã€‚

`krabkrab doctor` åœ¨æ£€æµ‹åˆ°é¢å¤–å·¥ä½œåŒºç›®å½•æ—¶ä¼šå‘å‡ºè­¦å‘Šã€‚

## å·¥ä½œåŒºæ–‡ä»¶æ˜ å°„ï¼ˆæ¯ä¸ªæ–‡ä»¶çš„å«ä¹‰ï¼‰

è¿™äº›æ˜¯ KrabKrab åœ¨å·¥ä½œåŒºå†…æœŸæœ›çš„æ ‡å‡†æ–‡ä»¶ï¼š

- `AGENTS.md`
  - æ™ºèƒ½ä½“çš„æ“ä½œæŒ‡å—ä»¥åŠå®ƒåº”è¯¥å¦‚ä½•ä½¿ç”¨è®°å¿†ã€‚
  - åœ¨æ¯ä¸ªä¼šè¯å¼€å§‹æ—¶åŠ è½½ã€‚
  - é€‚åˆæ”¾ç½®è§„åˆ™ã€ä¼˜å…ˆçº§å’Œ"å¦‚ä½•è¡Œä¸º"çš„è¯¦ç»†ä¿¡æ¯ã€‚

- `SOUL.md`
  - äººè®¾ã€è¯­æ°”å’Œè¾¹ç•Œã€‚
  - æ¯ä¸ªä¼šè¯åŠ è½½ã€‚

- `USER.md`
  - ç”¨æˆ·æ˜¯è°ä»¥åŠå¦‚ä½•ç§°å‘¼ä»–ä»¬ã€‚
  - æ¯ä¸ªä¼šè¯åŠ è½½ã€‚

- `IDENTITY.md`
  - æ™ºèƒ½ä½“çš„åç§°ã€é£Žæ ¼å’Œè¡¨æƒ…ç¬¦å·ã€‚
  - åœ¨å¼•å¯¼ä»ªå¼æœŸé—´åˆ›å»º/æ›´æ–°ã€‚

- `TOOLS.md`
  - å…³äºŽä½ æœ¬åœ°å·¥å…·å’Œæƒ¯ä¾‹çš„æ³¨é‡Šã€‚
  - ä¸æŽ§åˆ¶å·¥å…·å¯ç”¨æ€§ï¼›ä»…ä½œä¸ºæŒ‡å¯¼ã€‚

- `HEARTBEAT.md`
  - å¯é€‰çš„å¿ƒè·³è¿è¡Œå°åž‹æ£€æŸ¥æ¸…å•ã€‚
  - ä¿æŒç®€çŸ­ä»¥é¿å… token æ¶ˆè€—ã€‚

- `BOOT.md`
  - å½“å¯ç”¨å†…éƒ¨ hooks æ—¶ï¼Œåœ¨ Gateway ç½‘å…³é‡å¯æ—¶æ‰§è¡Œçš„å¯é€‰å¯åŠ¨æ£€æŸ¥æ¸…å•ã€‚
  - ä¿æŒç®€çŸ­ï¼›ä½¿ç”¨ message å·¥å…·è¿›è¡Œå‡ºç«™å‘é€ã€‚

- `BOOTSTRAP.md`
  - ä¸€æ¬¡æ€§é¦–æ¬¡è¿è¡Œä»ªå¼ã€‚
  - ä»…ä¸ºå…¨æ–°å·¥ä½œåŒºåˆ›å»ºã€‚
  - ä»ªå¼å®ŒæˆåŽåˆ é™¤å®ƒã€‚

- `memory/YYYY-MM-DD.md`
  - æ¯æ—¥è®°å¿†æ—¥å¿—ï¼ˆæ¯å¤©ä¸€ä¸ªæ–‡ä»¶ï¼‰ã€‚
  - å»ºè®®åœ¨ä¼šè¯å¼€å§‹æ—¶è¯»å–ä»Šå¤© + æ˜¨å¤©çš„å†…å®¹ã€‚

- `MEMORY.md`ï¼ˆå¯é€‰ï¼‰
  - ç²¾é€‰çš„é•¿æœŸè®°å¿†ã€‚
  - ä»…åœ¨ä¸»ç§å¯†ä¼šè¯ä¸­åŠ è½½ï¼ˆä¸åœ¨å…±äº«/ç¾¤ç»„ä¸Šä¸‹æ–‡ä¸­ï¼‰ã€‚

å‚è§ [è®°å¿†](/concepts/memory) äº†è§£å·¥ä½œæµç¨‹å’Œè‡ªåŠ¨è®°å¿†åˆ·æ–°ã€‚

- `skills/`ï¼ˆå¯é€‰ï¼‰
  - å·¥ä½œåŒºç‰¹å®šçš„ Skillsã€‚
  - å½“åç§°å†²çªæ—¶è¦†ç›–æ‰˜ç®¡/æ†ç»‘çš„ Skillsã€‚

- `canvas/`ï¼ˆå¯é€‰ï¼‰
  - ç”¨äºŽèŠ‚ç‚¹æ˜¾ç¤ºçš„ Canvas UI æ–‡ä»¶ï¼ˆä¾‹å¦‚ `canvas/index.html`ï¼‰ã€‚

å¦‚æžœä»»ä½•å¼•å¯¼æ–‡ä»¶ç¼ºå¤±ï¼ŒKrabKrab ä¼šåœ¨ä¼šè¯ä¸­æ³¨å…¥"ç¼ºå¤±æ–‡ä»¶"æ ‡è®°å¹¶ç»§ç»­ã€‚å¤§åž‹å¼•å¯¼æ–‡ä»¶åœ¨æ³¨å…¥æ—¶ä¼šè¢«æˆªæ–­ï¼›ä½¿ç”¨ `agents.defaults.bootstrapMaxChars` è°ƒæ•´é™åˆ¶ï¼ˆé»˜è®¤ï¼š20000ï¼‰ã€‚
`krabkrab setup` å¯ä»¥é‡æ–°åˆ›å»ºç¼ºå¤±çš„é»˜è®¤å€¼è€Œä¸è¦†ç›–çŽ°æœ‰æ–‡ä»¶ã€‚

## å·¥ä½œåŒºä¸­ä¸åŒ…å«çš„å†…å®¹

è¿™äº›ä½äºŽ `~/.krabkrab/` ä¸‹ï¼Œä¸åº”æäº¤åˆ°å·¥ä½œåŒºä»“åº“ï¼š

- `~/.krabkrab/krabkrab.json`ï¼ˆé…ç½®ï¼‰
- `~/.krabkrab/credentials/`ï¼ˆOAuth tokenã€API å¯†é’¥ï¼‰
- `~/.krabkrab/agents/<agentId>/sessions/`ï¼ˆä¼šè¯è®°å½• + å…ƒæ•°æ®ï¼‰
- `~/.krabkrab/skills/`ï¼ˆæ‰˜ç®¡çš„ Skillsï¼‰

å¦‚æžœä½ éœ€è¦è¿ç§»ä¼šè¯æˆ–é…ç½®ï¼Œè¯·å•ç‹¬å¤åˆ¶å®ƒä»¬å¹¶å°†å®ƒä»¬æŽ’é™¤åœ¨ç‰ˆæœ¬æŽ§åˆ¶ä¹‹å¤–ã€‚

## Git å¤‡ä»½ï¼ˆæŽ¨èï¼Œç§æœ‰ï¼‰

å°†å·¥ä½œåŒºè§†ä¸ºç§å¯†è®°å¿†ã€‚å°†å…¶æ”¾å…¥**ç§æœ‰** git ä»“åº“ä»¥ä¾¿å¤‡ä»½å’Œæ¢å¤ã€‚

åœ¨è¿è¡Œ Gateway ç½‘å…³çš„æœºå™¨ä¸Šæ‰§è¡Œè¿™äº›æ­¥éª¤ï¼ˆå·¥ä½œåŒºå°±åœ¨é‚£é‡Œï¼‰ã€‚

### 1ï¼‰åˆå§‹åŒ–ä»“åº“

å¦‚æžœå®‰è£…äº† gitï¼Œå…¨æ–°å·¥ä½œåŒºä¼šè‡ªåŠ¨åˆå§‹åŒ–ã€‚å¦‚æžœæ­¤å·¥ä½œåŒºè¿˜ä¸æ˜¯ä»“åº“ï¼Œè¯·è¿è¡Œï¼š

```bash
cd ~/.krabkrab/workspace
git init
git add AGENTS.md SOUL.md TOOLS.md IDENTITY.md USER.md HEARTBEAT.md memory/
git commit -m "Add agent workspace"
```

### 2ï¼‰æ·»åŠ ç§æœ‰è¿œç¨‹ï¼ˆé€‚åˆåˆå­¦è€…çš„é€‰é¡¹ï¼‰

é€‰é¡¹ Aï¼šGitHub ç½‘é¡µç•Œé¢

1. åœ¨ GitHub ä¸Šåˆ›å»ºæ–°çš„**ç§æœ‰**ä»“åº“ã€‚
2. ä¸è¦ç”¨ README åˆå§‹åŒ–ï¼ˆé¿å…åˆå¹¶å†²çªï¼‰ã€‚
3. å¤åˆ¶ HTTPS è¿œç¨‹ URLã€‚
4. æ·»åŠ è¿œç¨‹å¹¶æŽ¨é€ï¼š

```bash
git branch -M main
git remote add origin <https-url>
git push -u origin main
```

é€‰é¡¹ Bï¼šGitHub CLIï¼ˆ`gh`ï¼‰

```bash
gh auth login
gh repo create krabkrab-workspace --private --source . --remote origin --push
```

é€‰é¡¹ Cï¼šGitLab ç½‘é¡µç•Œé¢

1. åœ¨ GitLab ä¸Šåˆ›å»ºæ–°çš„**ç§æœ‰**ä»“åº“ã€‚
2. ä¸è¦ç”¨ README åˆå§‹åŒ–ï¼ˆé¿å…åˆå¹¶å†²çªï¼‰ã€‚
3. å¤åˆ¶ HTTPS è¿œç¨‹ URLã€‚
4. æ·»åŠ è¿œç¨‹å¹¶æŽ¨é€ï¼š

```bash
git branch -M main
git remote add origin <https-url>
git push -u origin main
```

### 3ï¼‰æŒç»­æ›´æ–°

```bash
git status
git add .
git commit -m "Update memory"
git push
```

## ä¸è¦æäº¤å¯†é’¥

å³ä½¿åœ¨ç§æœ‰ä»“åº“ä¸­ï¼Œä¹Ÿè¦é¿å…åœ¨å·¥ä½œåŒºä¸­å­˜å‚¨å¯†é’¥ï¼š

- API å¯†é’¥ã€OAuth tokenã€å¯†ç æˆ–ç§æœ‰å‡­è¯ã€‚
- `~/.krabkrab/` ä¸‹çš„ä»»ä½•å†…å®¹ã€‚
- èŠå¤©çš„åŽŸå§‹è½¬å‚¨æˆ–æ•æ„Ÿé™„ä»¶ã€‚

å¦‚æžœä½ å¿…é¡»å­˜å‚¨æ•æ„Ÿå¼•ç”¨ï¼Œè¯·ä½¿ç”¨å ä½ç¬¦å¹¶å°†çœŸæ­£çš„å¯†é’¥ä¿å­˜åœ¨å…¶ä»–åœ°æ–¹ï¼ˆå¯†ç ç®¡ç†å™¨ã€çŽ¯å¢ƒå˜é‡æˆ– `~/.krabkrab/`ï¼‰ã€‚

å»ºè®®çš„ `.gitignore` èµ·å§‹é…ç½®ï¼š

```gitignore
.DS_Store
.env
**/*.key
**/*.pem
**/secrets*
```

## å°†å·¥ä½œåŒºè¿ç§»åˆ°æ–°æœºå™¨

1. å°†ä»“åº“å…‹éš†åˆ°æ‰€éœ€è·¯å¾„ï¼ˆé»˜è®¤ `~/.krabkrab/workspace`ï¼‰ã€‚
2. åœ¨ `~/.krabkrab/krabkrab.json` ä¸­å°† `agents.defaults.workspace` è®¾ç½®ä¸ºè¯¥è·¯å¾„ã€‚
3. è¿è¡Œ `krabkrab setup --workspace <path>` æ¥å¡«å……ä»»ä½•ç¼ºå¤±çš„æ–‡ä»¶ã€‚
4. å¦‚æžœä½ éœ€è¦ä¼šè¯ï¼Œè¯·å•ç‹¬ä»Žæ—§æœºå™¨å¤åˆ¶ `~/.krabkrab/agents/<agentId>/sessions/`ã€‚

## é«˜çº§æ³¨æ„äº‹é¡¹

- å¤šæ™ºèƒ½ä½“è·¯ç”±å¯ä»¥ä¸ºæ¯ä¸ªæ™ºèƒ½ä½“ä½¿ç”¨ä¸åŒçš„å·¥ä½œåŒºã€‚å‚è§
  [æ¸ é“è·¯ç”±](/channels/channel-routing) äº†è§£è·¯ç”±é…ç½®ã€‚
- å¦‚æžœå¯ç”¨äº† `agents.defaults.sandbox`ï¼Œéžä¸»ä¼šè¯å¯ä»¥åœ¨ `agents.defaults.sandbox.workspaceRoot` ä¸‹ä½¿ç”¨æ¯ä¼šè¯æ²™ç®±å·¥ä½œåŒºã€‚

