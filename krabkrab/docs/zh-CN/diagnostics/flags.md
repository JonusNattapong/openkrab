---
read_when:
  - ä½ éœ€è¦å®šå‘è°ƒè¯•æ—¥å¿—è€Œä¸æé«˜å…¨å±€æ—¥å¿—çº§åˆ«
  - ä½ éœ€è¦ä¸ºæ”¯æŒäººå‘˜æ•èŽ·ç‰¹å®šå­ç³»ç»Ÿçš„æ—¥å¿—
summary: ç”¨äºŽå®šå‘è°ƒè¯•æ—¥å¿—çš„è¯Šæ–­æ ‡å¿—
title: è¯Šæ–­æ ‡å¿—
x-i18n:
  generated_at: "2026-02-03T10:05:34Z"
  model: claude-opus-4-5
  provider: pi
  source_hash: daf0eca0e6bd1cbc2c400b2e94e1698709a96b9cdba1a8cf00bd580a61829124
  source_path: diagnostics/flags.md
  workflow: 15
---

# è¯Šæ–­æ ‡å¿—

è¯Šæ–­æ ‡å¿—è®©ä½ å¯ä»¥å¯ç”¨å®šå‘è°ƒè¯•æ—¥å¿—ï¼Œè€Œæ— éœ€åœ¨æ‰€æœ‰åœ°æ–¹å¼€å¯è¯¦ç»†æ—¥å¿—ã€‚æ ‡å¿—æ˜¯å¯é€‰å¯ç”¨çš„ï¼Œé™¤éžå­ç³»ç»Ÿæ£€æŸ¥å®ƒä»¬ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆã€‚

## å·¥ä½œåŽŸç†

- æ ‡å¿—æ˜¯å­—ç¬¦ä¸²ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ã€‚
- ä½ å¯ä»¥åœ¨é…ç½®ä¸­æˆ–é€šè¿‡çŽ¯å¢ƒå˜é‡è¦†ç›–æ¥å¯ç”¨æ ‡å¿—ã€‚
- æ”¯æŒé€šé…ç¬¦ï¼š
  - `telegram.*` åŒ¹é… `telegram.http`
  - `*` å¯ç”¨æ‰€æœ‰æ ‡å¿—

## é€šè¿‡é…ç½®å¯ç”¨

```json
{
  "diagnostics": {
    "flags": ["telegram.http"]
  }
}
```

å¤šä¸ªæ ‡å¿—ï¼š

```json
{
  "diagnostics": {
    "flags": ["telegram.http", "gateway.*"]
  }
}
```

æ›´æ”¹æ ‡å¿—åŽé‡å¯ Gateway ç½‘å…³ã€‚

## çŽ¯å¢ƒå˜é‡è¦†ç›–ï¼ˆä¸€æ¬¡æ€§ï¼‰

```bash
krabkrab_DIAGNOSTICS=telegram.http,telegram.payload
```

ç¦ç”¨æ‰€æœ‰æ ‡å¿—ï¼š

```bash
krabkrab_DIAGNOSTICS=0
```

## æ—¥å¿—å­˜å‚¨ä½ç½®

æ ‡å¿—å°†æ—¥å¿—è¾“å‡ºåˆ°æ ‡å‡†è¯Šæ–­æ—¥å¿—æ–‡ä»¶ã€‚é»˜è®¤ä½ç½®ï¼š

```
/tmp/krabkrab/krabkrab-YYYY-MM-DD.log
```

å¦‚æžœä½ è®¾ç½®äº† `logging.file`ï¼Œåˆ™ä½¿ç”¨è¯¥è·¯å¾„ã€‚æ—¥å¿—ä¸º JSONL æ ¼å¼ï¼ˆæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼‰ã€‚è„±æ•ä»ç„¶æ ¹æ® `logging.redactSensitive` åº”ç”¨ã€‚

## æå–æ—¥å¿—

é€‰æ‹©æœ€æ–°çš„æ—¥å¿—æ–‡ä»¶ï¼š

```bash
ls -t /tmp/krabkrab/krabkrab-*.log | head -n 1
```

è¿‡æ»¤ Telegram HTTP è¯Šæ–­ï¼š

```bash
rg "telegram http error" /tmp/krabkrab/krabkrab-*.log
```

æˆ–åœ¨å¤çŽ°æ—¶ä½¿ç”¨ tailï¼š

```bash
tail -f /tmp/krabkrab/krabkrab-$(date +%F).log | rg "telegram http error"
```

å¯¹äºŽè¿œç¨‹ Gateway ç½‘å…³ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `krabkrab logs --follow`ï¼ˆå‚è§ [/cli/logs](/cli/logs)ï¼‰ã€‚

## æ³¨æ„äº‹é¡¹

- å¦‚æžœ `logging.level` è®¾ç½®ä¸ºé«˜äºŽ `warn`ï¼Œè¿™äº›æ—¥å¿—å¯èƒ½ä¼šè¢«æŠ‘åˆ¶ã€‚é»˜è®¤çš„ `info` çº§åˆ«å³å¯ã€‚
- æ ‡å¿—å¯ä»¥å®‰å…¨åœ°ä¿æŒå¯ç”¨çŠ¶æ€ï¼›å®ƒä»¬åªå½±å“ç‰¹å®šå­ç³»ç»Ÿçš„æ—¥å¿—é‡ã€‚
- ä½¿ç”¨ [/logging](/logging) æ›´æ”¹æ—¥å¿—ç›®æ ‡ã€çº§åˆ«å’Œè„±æ•è®¾ç½®ã€‚

