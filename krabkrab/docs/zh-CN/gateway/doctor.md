---
read_when:
  - æ·»åŠ æˆ–ä¿®æ”¹ doctor è¿ç§»
  - å¼•å…¥ç ´åæ€§é…ç½®æ›´æ”¹
summary: Doctor å‘½ä»¤ï¼šå¥åº·æ£€æŸ¥ã€é…ç½®è¿ç§»å’Œä¿®å¤æ­¥éª¤
title: Doctor
x-i18n:
  generated_at: "2026-02-03T07:49:03Z"
  model: claude-opus-4-5
  provider: pi
  source_hash: df7b25f60fd08d508f4c6abfc8e7e06f29bd4bbb34c3320397f47eb72c8de83f
  source_path: gateway/doctor.md
  workflow: 15
---

# Doctor

`krabkrab doctor` æ˜¯ KrabKrab çš„ä¿®å¤ + è¿ç§»å·¥å…·ã€‚å®ƒä¿®å¤è¿‡æ—¶çš„é…ç½®/çŠ¶æ€ï¼Œæ£€æŸ¥å¥åº·çŠ¶å†µï¼Œå¹¶æä¾›å¯æ“ä½œçš„ä¿®å¤æ­¥éª¤ã€‚

## å¿«é€Ÿå¼€å§‹

```bash
krabkrab doctor
```

### æ— å¤´/è‡ªåŠ¨åŒ–

```bash
krabkrab doctor --yes
```

æ— éœ€æç¤ºæŽ¥å—é»˜è®¤å€¼ï¼ˆåŒ…æ‹¬é€‚ç”¨æ—¶çš„é‡å¯/æœåŠ¡/æ²™ç®±ä¿®å¤æ­¥éª¤ï¼‰ã€‚

```bash
krabkrab doctor --repair
```

æ— éœ€æç¤ºåº”ç”¨æŽ¨èçš„ä¿®å¤ï¼ˆå®‰å…¨æ—¶è¿›è¡Œä¿®å¤ + é‡å¯ï¼‰ã€‚

```bash
krabkrab doctor --repair --force
```

ä¹Ÿåº”ç”¨æ¿€è¿›çš„ä¿®å¤ï¼ˆè¦†ç›–è‡ªå®šä¹‰ supervisor é…ç½®ï¼‰ã€‚

```bash
krabkrab doctor --non-interactive
```

æ— éœ€æç¤ºè¿è¡Œï¼Œä»…åº”ç”¨å®‰å…¨è¿ç§»ï¼ˆé…ç½®è§„èŒƒåŒ– + ç£ç›˜çŠ¶æ€ç§»åŠ¨ï¼‰ã€‚è·³è¿‡éœ€è¦äººå·¥ç¡®è®¤çš„é‡å¯/æœåŠ¡/æ²™ç®±æ“ä½œã€‚
æ£€æµ‹åˆ°æ—¶è‡ªåŠ¨è¿è¡Œé—ç•™çŠ¶æ€è¿ç§»ã€‚

```bash
krabkrab doctor --deep
```

æ‰«æç³»ç»ŸæœåŠ¡ä»¥æŸ¥æ‰¾é¢å¤–çš„ Gateway ç½‘å…³å®‰è£…ï¼ˆlaunchd/systemd/schtasksï¼‰ã€‚

å¦‚æžœä½ æƒ³åœ¨å†™å…¥å‰æŸ¥çœ‹æ›´æ”¹ï¼Œè¯·å…ˆæ‰“å¼€é…ç½®æ–‡ä»¶ï¼š

```bash
cat ~/.krabkrab/krabkrab.json
```

## åŠŸèƒ½æ¦‚è¿°

- git å®‰è£…çš„å¯é€‰é¢„æ£€æ›´æ–°ï¼ˆä»…äº¤äº’æ¨¡å¼ï¼‰ã€‚
- UI åè®®æ–°é²œåº¦æ£€æŸ¥ï¼ˆå½“åè®® schema è¾ƒæ–°æ—¶é‡å»º Control UIï¼‰ã€‚
- å¥åº·æ£€æŸ¥ + é‡å¯æç¤ºã€‚
- Skills çŠ¶æ€æ‘˜è¦ï¼ˆç¬¦åˆæ¡ä»¶/ç¼ºå¤±/è¢«é˜»æ­¢ï¼‰ã€‚
- é—ç•™å€¼çš„é…ç½®è§„èŒƒåŒ–ã€‚
- OpenCode Zen æä¾›å•†è¦†ç›–è­¦å‘Šï¼ˆ`models.providers.opencode`ï¼‰ã€‚
- é—ç•™ç£ç›˜çŠ¶æ€è¿ç§»ï¼ˆä¼šè¯/æ™ºèƒ½ä½“ç›®å½•/WhatsApp è®¤è¯ï¼‰ã€‚
- çŠ¶æ€å®Œæ•´æ€§å’Œæƒé™æ£€æŸ¥ï¼ˆä¼šè¯ã€è®°å½•ã€çŠ¶æ€ç›®å½•ï¼‰ã€‚
- æœ¬åœ°è¿è¡Œæ—¶çš„é…ç½®æ–‡ä»¶æƒé™æ£€æŸ¥ï¼ˆchmod 600ï¼‰ã€‚
- æ¨¡åž‹è®¤è¯å¥åº·ï¼šæ£€æŸ¥ OAuth è¿‡æœŸï¼Œå¯åˆ·æ–°å³å°†è¿‡æœŸçš„ tokenï¼Œå¹¶æŠ¥å‘Šè®¤è¯é…ç½®æ–‡ä»¶å†·å´/ç¦ç”¨çŠ¶æ€ã€‚
- é¢å¤–å·¥ä½œåŒºç›®å½•æ£€æµ‹ï¼ˆ`~/krabkrab`ï¼‰ã€‚
- å¯ç”¨æ²™ç®±éš”ç¦»æ—¶çš„æ²™ç®±é•œåƒä¿®å¤ã€‚
- é—ç•™æœåŠ¡è¿ç§»å’Œé¢å¤– Gateway ç½‘å…³æ£€æµ‹ã€‚
- Gateway ç½‘å…³è¿è¡Œæ—¶æ£€æŸ¥ï¼ˆæœåŠ¡å·²å®‰è£…ä½†æœªè¿è¡Œï¼›ç¼“å­˜çš„ launchd æ ‡ç­¾ï¼‰ã€‚
- æ¸ é“çŠ¶æ€è­¦å‘Šï¼ˆä»Žè¿è¡Œä¸­çš„ Gateway ç½‘å…³æŽ¢æµ‹ï¼‰ã€‚
- Supervisor é…ç½®å®¡è®¡ï¼ˆlaunchd/systemd/schtasksï¼‰åŠå¯é€‰ä¿®å¤ã€‚
- Gateway ç½‘å…³è¿è¡Œæ—¶æœ€ä½³å®žè·µæ£€æŸ¥ï¼ˆNode vs Bunï¼Œç‰ˆæœ¬ç®¡ç†å™¨è·¯å¾„ï¼‰ã€‚
- Gateway ç½‘å…³ç«¯å£å†²çªè¯Šæ–­ï¼ˆé»˜è®¤ `18789`ï¼‰ã€‚
- å¼€æ”¾ç§ä¿¡ç­–ç•¥çš„å®‰å…¨è­¦å‘Šã€‚
- æœªè®¾ç½® `gateway.auth.token` æ—¶çš„ Gateway ç½‘å…³è®¤è¯è­¦å‘Šï¼ˆæœ¬åœ°æ¨¡å¼ï¼›æä¾› token ç”Ÿæˆï¼‰ã€‚
- Linux ä¸Šçš„ systemd linger æ£€æŸ¥ã€‚
- æºç å®‰è£…æ£€æŸ¥ï¼ˆpnpm workspace ä¸åŒ¹é…ã€ç¼ºå¤± UI èµ„äº§ã€ç¼ºå¤± tsx äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ã€‚
- å†™å…¥æ›´æ–°åŽçš„é…ç½® + å‘å¯¼å…ƒæ•°æ®ã€‚

## è¯¦ç»†è¡Œä¸ºå’ŒåŽŸç†

### 0ï¼‰å¯é€‰æ›´æ–°ï¼ˆgit å®‰è£…ï¼‰

å¦‚æžœè¿™æ˜¯ git æ£€å‡ºä¸” doctor ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œå®ƒä¼šåœ¨è¿è¡Œ doctor ä¹‹å‰æä¾›æ›´æ–°ï¼ˆfetch/rebase/buildï¼‰ã€‚

### 1ï¼‰é…ç½®è§„èŒƒåŒ–

å¦‚æžœé…ç½®åŒ…å«é—ç•™å€¼å½¢å¼ï¼ˆä¾‹å¦‚æ²¡æœ‰æ¸ é“ç‰¹å®šè¦†ç›–çš„ `messages.ackReaction`ï¼‰ï¼Œdoctor ä¼šå°†å®ƒä»¬è§„èŒƒåŒ–ä¸ºå½“å‰ schemaã€‚

### 2ï¼‰é—ç•™é…ç½®é”®è¿ç§»

å½“é…ç½®åŒ…å«å·²å¼ƒç”¨çš„é”®æ—¶ï¼Œå…¶ä»–å‘½ä»¤ä¼šæ‹’ç»è¿è¡Œå¹¶è¦æ±‚ä½ è¿è¡Œ `krabkrab doctor`ã€‚

Doctor å°†ï¼š

- è§£é‡Šæ‰¾åˆ°äº†å“ªäº›é—ç•™é”®ã€‚
- æ˜¾ç¤ºå®ƒåº”ç”¨çš„è¿ç§»ã€‚
- ä½¿ç”¨æ›´æ–°åŽçš„ schema é‡å†™ `~/.krabkrab/krabkrab.json`ã€‚

Gateway ç½‘å…³åœ¨æ£€æµ‹åˆ°é—ç•™é…ç½®æ ¼å¼æ—¶ä¹Ÿä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ doctor è¿ç§»ï¼Œå› æ­¤è¿‡æ—¶çš„é…ç½®æ— éœ€æ‰‹åŠ¨å¹²é¢„å³å¯ä¿®å¤ã€‚

å½“å‰è¿ç§»ï¼š

- `routing.allowFrom` â†’ `channels.whatsapp.allowFrom`
- `routing.groupChat.requireMention` â†’ `channels.whatsapp/telegram/imessage.groups."*".requireMention`
- `routing.groupChat.historyLimit` â†’ `messages.groupChat.historyLimit`
- `routing.groupChat.mentionPatterns` â†’ `messages.groupChat.mentionPatterns`
- `routing.queue` â†’ `messages.queue`
- `routing.bindings` â†’ é¡¶çº§ `bindings`
- `routing.agents`/`routing.defaultAgentId` â†’ `agents.list` + `agents.list[].default`
- `routing.agentToAgent` â†’ `tools.agentToAgent`
- `routing.transcribeAudio` â†’ `tools.media.audio.models`
- `bindings[].match.accountID` â†’ `bindings[].match.accountId`
- `identity` â†’ `agents.list[].identity`
- `agent.*` â†’ `agents.defaults` + `tools.*`ï¼ˆtools/elevated/exec/sandbox/subagentsï¼‰
- `agent.model`/`allowedModels`/`modelAliases`/`modelFallbacks`/`imageModelFallbacks`
  â†’ `agents.defaults.models` + `agents.defaults.model.primary/fallbacks` + `agents.defaults.imageModel.primary/fallbacks`

### 2bï¼‰OpenCode Zen æä¾›å•†è¦†ç›–

å¦‚æžœä½ æ‰‹åŠ¨æ·»åŠ äº† `models.providers.opencode`ï¼ˆæˆ– `opencode-zen`ï¼‰ï¼Œå®ƒä¼šè¦†ç›– `@mariozechner/pi-ai` ä¸­å†…ç½®çš„ OpenCode Zen ç›®å½•ã€‚è¿™å¯èƒ½ä¼šå¼ºåˆ¶å°†æ¯ä¸ªæ¨¡åž‹æ”¾åˆ°å•ä¸ª API ä¸Šæˆ–å°†æˆæœ¬å½’é›¶ã€‚Doctor ä¼šå‘å‡ºè­¦å‘Šï¼Œä»¥ä¾¿ä½ å¯ä»¥ç§»é™¤è¦†ç›–å¹¶æ¢å¤æ¯æ¨¡åž‹ API è·¯ç”± + æˆæœ¬ã€‚

### 3ï¼‰é—ç•™çŠ¶æ€è¿ç§»ï¼ˆç£ç›˜å¸ƒå±€ï¼‰

Doctor å¯ä»¥å°†æ—§çš„ç£ç›˜å¸ƒå±€è¿ç§»åˆ°å½“å‰ç»“æž„ï¼š

- ä¼šè¯å­˜å‚¨ + è®°å½•ï¼š
  - ä»Ž `~/.krabkrab/sessions/` åˆ° `~/.krabkrab/agents/<agentId>/sessions/`
- æ™ºèƒ½ä½“ç›®å½•ï¼š
  - ä»Ž `~/.krabkrab/agent/` åˆ° `~/.krabkrab/agents/<agentId>/agent/`
- WhatsApp è®¤è¯çŠ¶æ€ï¼ˆBaileysï¼‰ï¼š
  - ä»Žé—ç•™çš„ `~/.krabkrab/credentials/*.json`ï¼ˆé™¤ `oauth.json` å¤–ï¼‰
  - åˆ° `~/.krabkrab/credentials/whatsapp/<accountId>/...`ï¼ˆé»˜è®¤è´¦æˆ· idï¼š`default`ï¼‰

è¿™äº›è¿ç§»æ˜¯å°½åŠ›è€Œä¸ºä¸”å¹‚ç­‰çš„ï¼›å½“ doctor å°†ä»»ä½•é—ç•™æ–‡ä»¶å¤¹ä½œä¸ºå¤‡ä»½ä¿ç•™æ—¶ä¼šå‘å‡ºè­¦å‘Šã€‚Gateway ç½‘å…³/CLI ä¹Ÿä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿ç§»é—ç•™ä¼šè¯ + æ™ºèƒ½ä½“ç›®å½•ï¼Œå› æ­¤åŽ†å²/è®¤è¯/æ¨¡åž‹ä¼šè½åœ¨æ¯æ™ºèƒ½ä½“è·¯å¾„ä¸­ï¼Œæ— éœ€æ‰‹åŠ¨è¿è¡Œ doctorã€‚WhatsApp è®¤è¯æœ‰æ„ä»…é€šè¿‡ `krabkrab doctor` è¿ç§»ã€‚

### 4ï¼‰çŠ¶æ€å®Œæ•´æ€§æ£€æŸ¥ï¼ˆä¼šè¯æŒä¹…åŒ–ã€è·¯ç”±å’Œå®‰å…¨ï¼‰

çŠ¶æ€ç›®å½•æ˜¯æ“ä½œçš„æ ¸å¿ƒã€‚å¦‚æžœå®ƒæ¶ˆå¤±ï¼Œä½ ä¼šä¸¢å¤±ä¼šè¯ã€å‡­è¯ã€æ—¥å¿—å’Œé…ç½®ï¼ˆé™¤éžä½ åœ¨åˆ«å¤„æœ‰å¤‡ä»½ï¼‰ã€‚

Doctor æ£€æŸ¥ï¼š

- **çŠ¶æ€ç›®å½•ç¼ºå¤±**ï¼šè­¦å‘Šç¾éš¾æ€§çŠ¶æ€ä¸¢å¤±ï¼Œæç¤ºé‡æ–°åˆ›å»ºç›®å½•ï¼Œå¹¶æé†’ä½ å®ƒæ— æ³•æ¢å¤ä¸¢å¤±çš„æ•°æ®ã€‚
- **çŠ¶æ€ç›®å½•æƒé™**ï¼šéªŒè¯å¯å†™æ€§ï¼›æä¾›ä¿®å¤æƒé™ï¼ˆå¹¶åœ¨æ£€æµ‹åˆ°æ‰€æœ‰è€…/ç»„ä¸åŒ¹é…æ—¶å‘å‡º `chown` æç¤ºï¼‰ã€‚
- **ä¼šè¯ç›®å½•ç¼ºå¤±**ï¼š`sessions/` å’Œä¼šè¯å­˜å‚¨ç›®å½•æ˜¯æŒä¹…åŒ–åŽ†å²å’Œé¿å… `ENOENT` å´©æºƒæ‰€å¿…éœ€çš„ã€‚
- **è®°å½•ä¸åŒ¹é…**ï¼šå½“æœ€è¿‘çš„ä¼šè¯æ¡ç›®ç¼ºå°‘è®°å½•æ–‡ä»¶æ—¶å‘å‡ºè­¦å‘Šã€‚
- **ä¸»ä¼šè¯"1 è¡Œ JSONL"**ï¼šå½“ä¸»è®°å½•åªæœ‰ä¸€è¡Œæ—¶æ ‡è®°ï¼ˆåŽ†å²æœªç´¯ç§¯ï¼‰ã€‚
- **å¤šä¸ªçŠ¶æ€ç›®å½•**ï¼šå½“å¤šä¸ª `~/.krabkrab` æ–‡ä»¶å¤¹å­˜åœ¨äºŽä¸åŒ home ç›®å½•æˆ–å½“ `krabkrab_STATE_DIR` æŒ‡å‘åˆ«å¤„æ—¶å‘å‡ºè­¦å‘Šï¼ˆåŽ†å²å¯èƒ½åœ¨å®‰è£…ä¹‹é—´åˆ†è£‚ï¼‰ã€‚
- **è¿œç¨‹æ¨¡å¼æé†’**ï¼šå¦‚æžœ `gateway.mode=remote`ï¼Œdoctor ä¼šæé†’ä½ åœ¨è¿œç¨‹ä¸»æœºä¸Šè¿è¡Œå®ƒï¼ˆçŠ¶æ€åœ¨é‚£é‡Œï¼‰ã€‚
- **é…ç½®æ–‡ä»¶æƒé™**ï¼šå½“ `~/.krabkrab/krabkrab.json` å¯¹ç»„/å…¶ä»–ç”¨æˆ·å¯è¯»æ—¶å‘å‡ºè­¦å‘Šï¼Œå¹¶æä¾›æ”¶ç´§åˆ° `600` çš„é€‰é¡¹ã€‚

### 5ï¼‰æ¨¡åž‹è®¤è¯å¥åº·ï¼ˆOAuth è¿‡æœŸï¼‰

Doctor æ£€æŸ¥è®¤è¯å­˜å‚¨ä¸­çš„ OAuth é…ç½®æ–‡ä»¶ï¼Œåœ¨ token å³å°†è¿‡æœŸ/å·²è¿‡æœŸæ—¶å‘å‡ºè­¦å‘Šï¼Œå¹¶åœ¨å®‰å…¨æ—¶åˆ·æ–°å®ƒä»¬ã€‚å¦‚æžœ Anthropic Claude Code é…ç½®æ–‡ä»¶è¿‡æ—¶ï¼Œå®ƒä¼šå»ºè®®è¿è¡Œ `claude setup-token`ï¼ˆæˆ–ç²˜è´´ setup-tokenï¼‰ã€‚
åˆ·æ–°æç¤ºä»…åœ¨äº¤äº’è¿è¡Œï¼ˆTTYï¼‰æ—¶å‡ºçŽ°ï¼›`--non-interactive` è·³è¿‡åˆ·æ–°å°è¯•ã€‚

Doctor è¿˜ä¼šæŠ¥å‘Šç”±äºŽä»¥ä¸‹åŽŸå› æš‚æ—¶ä¸å¯ç”¨çš„è®¤è¯é…ç½®æ–‡ä»¶ï¼š

- çŸ­å†·å´ï¼ˆé€ŸçŽ‡é™åˆ¶/è¶…æ—¶/è®¤è¯å¤±è´¥ï¼‰
- é•¿ç¦ç”¨ï¼ˆè´¦å•/ä¿¡ç”¨å¤±è´¥ï¼‰

### 6ï¼‰Hooks æ¨¡åž‹éªŒè¯

å¦‚æžœè®¾ç½®äº† `hooks.gmail.model`ï¼Œdoctor ä¼šæ ¹æ®ç›®å½•å’Œå…è®¸åˆ—è¡¨éªŒè¯æ¨¡åž‹å¼•ç”¨ï¼Œå¹¶åœ¨æ— æ³•è§£æžæˆ–ä¸å…è®¸æ—¶å‘å‡ºè­¦å‘Šã€‚

### 7ï¼‰æ²™ç®±é•œåƒä¿®å¤

å½“å¯ç”¨æ²™ç®±éš”ç¦»æ—¶ï¼Œdoctor æ£€æŸ¥ Docker é•œåƒï¼Œå¹¶åœ¨å½“å‰é•œåƒç¼ºå¤±æ—¶æä¾›æž„å»ºæˆ–åˆ‡æ¢åˆ°é—ç•™åç§°çš„é€‰é¡¹ã€‚

### 8ï¼‰Gateway ç½‘å…³æœåŠ¡è¿ç§»å’Œæ¸…ç†æç¤º

Doctor æ£€æµ‹é—ç•™çš„ Gateway ç½‘å…³æœåŠ¡ï¼ˆlaunchd/systemd/schtasksï¼‰ï¼Œå¹¶æä¾›åˆ é™¤å®ƒä»¬å¹¶ä½¿ç”¨å½“å‰ Gateway ç½‘å…³ç«¯å£å®‰è£… KrabKrab æœåŠ¡çš„é€‰é¡¹ã€‚å®ƒè¿˜å¯ä»¥æ‰«æé¢å¤–çš„ç±» Gateway ç½‘å…³æœåŠ¡å¹¶æ‰“å°æ¸…ç†æç¤ºã€‚
é…ç½®æ–‡ä»¶å‘½åçš„ KrabKrab Gateway ç½‘å…³æœåŠ¡è¢«è§†ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œä¸ä¼šè¢«æ ‡è®°ä¸º"é¢å¤–çš„"ã€‚

### 9ï¼‰å®‰å…¨è­¦å‘Š

å½“æä¾›å•†å¯¹ç§ä¿¡å¼€æ”¾è€Œæ²¡æœ‰å…è®¸åˆ—è¡¨ï¼Œæˆ–å½“ç­–ç•¥ä»¥å±é™©æ–¹å¼é…ç½®æ—¶ï¼ŒDoctor ä¼šå‘å‡ºè­¦å‘Šã€‚

### 10ï¼‰systemd lingerï¼ˆLinuxï¼‰

å¦‚æžœä½œä¸º systemd ç”¨æˆ·æœåŠ¡è¿è¡Œï¼Œdoctor ç¡®ä¿å¯ç”¨ lingeringï¼Œä»¥ä¾¿ Gateway ç½‘å…³åœ¨æ³¨é”€åŽä¿æŒæ´»åŠ¨ã€‚

### 11ï¼‰Skills çŠ¶æ€

Doctor æ‰“å°å½“å‰å·¥ä½œåŒºç¬¦åˆæ¡ä»¶/ç¼ºå¤±/è¢«é˜»æ­¢çš„ Skills çš„å¿«é€Ÿæ‘˜è¦ã€‚

### 12ï¼‰Gateway ç½‘å…³è®¤è¯æ£€æŸ¥ï¼ˆæœ¬åœ° tokenï¼‰

å½“æœ¬åœ° Gateway ç½‘å…³ç¼ºå°‘ `gateway.auth` æ—¶ï¼ŒDoctor ä¼šå‘å‡ºè­¦å‘Šå¹¶æä¾›ç”Ÿæˆ token çš„é€‰é¡¹ã€‚ä½¿ç”¨ `krabkrab doctor --generate-gateway-token` åœ¨è‡ªåŠ¨åŒ–ä¸­å¼ºåˆ¶åˆ›å»º tokenã€‚

### 13ï¼‰Gateway ç½‘å…³å¥åº·æ£€æŸ¥ + é‡å¯

Doctor è¿è¡Œå¥åº·æ£€æŸ¥ï¼Œå¹¶åœ¨ Gateway ç½‘å…³çœ‹èµ·æ¥ä¸å¥åº·æ—¶æä¾›é‡å¯é€‰é¡¹ã€‚

### 14ï¼‰æ¸ é“çŠ¶æ€è­¦å‘Š

å¦‚æžœ Gateway ç½‘å…³å¥åº·ï¼Œdoctor è¿è¡Œæ¸ é“çŠ¶æ€æŽ¢æµ‹å¹¶æŠ¥å‘Šè­¦å‘ŠåŠå»ºè®®çš„ä¿®å¤ã€‚

### 15ï¼‰Supervisor é…ç½®å®¡è®¡ + ä¿®å¤

Doctor æ£€æŸ¥å·²å®‰è£…çš„ supervisor é…ç½®ï¼ˆlaunchd/systemd/schtasksï¼‰æ˜¯å¦æœ‰ç¼ºå¤±æˆ–è¿‡æ—¶çš„é»˜è®¤å€¼ï¼ˆä¾‹å¦‚ systemd network-online ä¾èµ–å’Œé‡å¯å»¶è¿Ÿï¼‰ã€‚å½“å‘çŽ°ä¸åŒ¹é…æ—¶ï¼Œå®ƒä¼šæŽ¨èæ›´æ–°ï¼Œå¹¶å¯ä»¥å°†æœåŠ¡æ–‡ä»¶/ä»»åŠ¡é‡å†™ä¸ºå½“å‰é»˜è®¤å€¼ã€‚

æ³¨æ„äº‹é¡¹ï¼š

- `krabkrab doctor` åœ¨é‡å†™ supervisor é…ç½®å‰æç¤ºã€‚
- `krabkrab doctor --yes` æŽ¥å—é»˜è®¤ä¿®å¤æç¤ºã€‚
- `krabkrab doctor --repair` æ— éœ€æç¤ºåº”ç”¨æŽ¨èçš„ä¿®å¤ã€‚
- `krabkrab doctor --repair --force` è¦†ç›–è‡ªå®šä¹‰ supervisor é…ç½®ã€‚
- ä½ å§‹ç»ˆå¯ä»¥é€šè¿‡ `krabkrab gateway install --force` å¼ºåˆ¶å®Œå…¨é‡å†™ã€‚

### 16ï¼‰Gateway ç½‘å…³è¿è¡Œæ—¶ + ç«¯å£è¯Šæ–­

Doctor æ£€æŸ¥æœåŠ¡è¿è¡Œæ—¶ï¼ˆPIDã€ä¸Šæ¬¡é€€å‡ºçŠ¶æ€ï¼‰ï¼Œå¹¶åœ¨æœåŠ¡å·²å®‰è£…ä½†å®žé™…æœªè¿è¡Œæ—¶å‘å‡ºè­¦å‘Šã€‚å®ƒè¿˜æ£€æŸ¥ Gateway ç½‘å…³ç«¯å£ï¼ˆé»˜è®¤ `18789`ï¼‰ä¸Šçš„ç«¯å£å†²çªï¼Œå¹¶æŠ¥å‘Šå¯èƒ½çš„åŽŸå› ï¼ˆGateway ç½‘å…³å·²åœ¨è¿è¡Œã€SSH éš§é“ï¼‰ã€‚

### 17ï¼‰Gateway ç½‘å…³è¿è¡Œæ—¶æœ€ä½³å®žè·µ

å½“ Gateway ç½‘å…³æœåŠ¡åœ¨ Bun æˆ–ç‰ˆæœ¬ç®¡ç†å™¨ç®¡ç†çš„ Node è·¯å¾„ï¼ˆ`nvm`ã€`fnm`ã€`volta`ã€`asdf` ç­‰ï¼‰ä¸Šè¿è¡Œæ—¶ï¼ŒDoctor ä¼šå‘å‡ºè­¦å‘Šã€‚WhatsApp + Telegram æ¸ é“éœ€è¦ Nodeï¼Œç‰ˆæœ¬ç®¡ç†å™¨è·¯å¾„åœ¨å‡çº§åŽå¯èƒ½ä¼šä¸­æ–­ï¼Œå› ä¸ºæœåŠ¡ä¸ä¼šåŠ è½½ä½ çš„ shell initã€‚Doctor ä¼šåœ¨å¯ç”¨æ—¶æä¾›è¿ç§»åˆ°ç³»ç»Ÿ Node å®‰è£…çš„é€‰é¡¹ï¼ˆHomebrew/apt/chocoï¼‰ã€‚

### 18ï¼‰é…ç½®å†™å…¥ + å‘å¯¼å…ƒæ•°æ®

Doctor æŒä¹…åŒ–ä»»ä½•é…ç½®æ›´æ”¹ï¼Œå¹¶æ ‡è®°å‘å¯¼å…ƒæ•°æ®ä»¥è®°å½• doctor è¿è¡Œã€‚

### 19ï¼‰å·¥ä½œåŒºæç¤ºï¼ˆå¤‡ä»½ + è®°å¿†ç³»ç»Ÿï¼‰

å½“ç¼ºå¤±æ—¶ï¼ŒDoctor å»ºè®®ä½¿ç”¨å·¥ä½œåŒºè®°å¿†ç³»ç»Ÿï¼Œå¹¶åœ¨å·¥ä½œåŒºå°šæœªåœ¨ git ä¸‹æ—¶æ‰“å°å¤‡ä»½æç¤ºã€‚

å‚è§ [/concepts/agent-workspace](/concepts/agent-workspace) äº†è§£å·¥ä½œåŒºç»“æž„å’Œ git å¤‡ä»½çš„å®Œæ•´æŒ‡å—ï¼ˆæŽ¨èç§æœ‰ GitHub æˆ– GitLabï¼‰ã€‚

