---
read_when:
  - å°† mac åº”ç”¨ä¸Ž Gateway ç½‘å…³ç”Ÿå‘½å‘¨æœŸé›†æˆæ—¶
summary: macOS ä¸Šçš„ Gateway ç½‘å…³ç”Ÿå‘½å‘¨æœŸï¼ˆlaunchdï¼‰
title: Gateway ç½‘å…³ç”Ÿå‘½å‘¨æœŸ
x-i18n:
  generated_at: "2026-02-03T07:52:31Z"
  model: claude-opus-4-5
  provider: pi
  source_hash: 9b910f574b723bc194ac663a5168e48d95f55cb468ce34c595d8ca60d3463c6a
  source_path: platforms/mac/child-process.md
  workflow: 15
---

# macOS ä¸Šçš„ Gateway ç½‘å…³ç”Ÿå‘½å‘¨æœŸ

macOS åº”ç”¨**é»˜è®¤é€šè¿‡ launchd ç®¡ç† Gateway ç½‘å…³**ï¼Œä¸ä¼šå°†
Gateway ç½‘å…³ä½œä¸ºå­è¿›ç¨‹ç”Ÿæˆã€‚å®ƒé¦–å…ˆå°è¯•è¿žæŽ¥åˆ°é…ç½®ç«¯å£ä¸Šå·²è¿è¡Œçš„
Gateway ç½‘å…³ï¼›å¦‚æžœæ— æ³•è®¿é—®ï¼Œå®ƒä¼šé€šè¿‡å¤–éƒ¨ `krabkrab` CLIï¼ˆæ— åµŒå…¥å¼è¿è¡Œæ—¶ï¼‰å¯ç”¨ launchd
æœåŠ¡ã€‚è¿™ä¸ºä½ æä¾›äº†å¯é çš„ç™»å½•æ—¶è‡ªåŠ¨å¯åŠ¨å’Œå´©æºƒåŽé‡å¯ã€‚

å­è¿›ç¨‹æ¨¡å¼ï¼ˆç”±åº”ç”¨ç›´æŽ¥ç”Ÿæˆ Gateway ç½‘å…³ï¼‰**ç›®å‰æœªä½¿ç”¨**ã€‚
å¦‚æžœä½ éœ€è¦ä¸Ž UI æ›´ç´§å¯†çš„è€¦åˆï¼Œè¯·åœ¨ç»ˆç«¯ä¸­æ‰‹åŠ¨è¿è¡Œ Gateway ç½‘å…³ã€‚

## é»˜è®¤è¡Œä¸ºï¼ˆlaunchdï¼‰

- åº”ç”¨å®‰è£…æ ‡è®°ä¸º `bot.molt.gateway` çš„æŒ‰ç”¨æˆ· LaunchAgent
  ï¼ˆä½¿ç”¨ `--profile`/`krabkrab_PROFILE` æ—¶ä¸º `bot.molt.<profile>`ï¼›æ”¯æŒæ—§ç‰ˆ `com.krabkrab.*`ï¼‰ã€‚
- å½“å¯ç”¨æœ¬åœ°æ¨¡å¼æ—¶ï¼Œåº”ç”¨ç¡®ä¿ LaunchAgent å·²åŠ è½½ï¼Œå¹¶
  åœ¨éœ€è¦æ—¶å¯åŠ¨ Gateway ç½‘å…³ã€‚
- æ—¥å¿—å†™å…¥ launchd Gateway ç½‘å…³æ—¥å¿—è·¯å¾„ï¼ˆåœ¨è°ƒè¯•è®¾ç½®ä¸­å¯è§ï¼‰ã€‚

å¸¸ç”¨å‘½ä»¤ï¼š

```bash
launchctl kickstart -k gui/$UID/bot.molt.gateway
launchctl bootout gui/$UID/bot.molt.gateway
```

è¿è¡Œå‘½åé…ç½®æ–‡ä»¶æ—¶ï¼Œå°†æ ‡ç­¾æ›¿æ¢ä¸º `bot.molt.<profile>`ã€‚

## æœªç­¾åçš„å¼€å‘æž„å»º

`scripts/restart-mac.sh --no-sign` ç”¨äºŽåœ¨æ²¡æœ‰ç­¾åå¯†é’¥æ—¶çš„å¿«é€Ÿæœ¬åœ°æž„å»ºã€‚ä¸ºäº†é˜²æ­¢ launchd æŒ‡å‘æœªç­¾åçš„ä¸­ç»§äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒï¼š

- å†™å…¥ `~/.krabkrab/disable-launchagent`ã€‚

å·²ç­¾åè¿è¡Œçš„ `scripts/restart-mac.sh` ä¼šåœ¨æ ‡è®°å­˜åœ¨æ—¶æ¸…é™¤æ­¤è¦†ç›–ã€‚è¦æ‰‹åŠ¨é‡ç½®ï¼š

```bash
rm ~/.krabkrab/disable-launchagent
```

## ä»…è¿žæŽ¥æ¨¡å¼

è¦å¼ºåˆ¶ macOS åº”ç”¨**æ°¸ä¸å®‰è£…æˆ–ç®¡ç† launchd**ï¼Œè¯·ä½¿ç”¨
`--attach-only`ï¼ˆæˆ– `--no-launchd`ï¼‰å¯åŠ¨å®ƒã€‚è¿™ä¼šè®¾ç½® `~/.krabkrab/disable-launchagent`ï¼Œ
å› æ­¤åº”ç”¨åªä¼šè¿žæŽ¥åˆ°å·²è¿è¡Œçš„ Gateway ç½‘å…³ã€‚ä½ å¯ä»¥åœ¨è°ƒè¯•è®¾ç½®ä¸­åˆ‡æ¢ç›¸åŒçš„
è¡Œä¸ºã€‚

## è¿œç¨‹æ¨¡å¼

è¿œç¨‹æ¨¡å¼æ°¸è¿œä¸ä¼šå¯åŠ¨æœ¬åœ° Gateway ç½‘å…³ã€‚åº”ç”¨ä½¿ç”¨åˆ°
è¿œç¨‹ä¸»æœºçš„ SSH éš§é“å¹¶é€šè¿‡è¯¥éš§é“è¿žæŽ¥ã€‚

## ä¸ºä»€ä¹ˆæˆ‘ä»¬æ›´å–œæ¬¢ launchd

- ç™»å½•æ—¶è‡ªåŠ¨å¯åŠ¨ã€‚
- å†…ç½®çš„é‡å¯/KeepAlive è¯­ä¹‰ã€‚
- å¯é¢„æµ‹çš„æ—¥å¿—å’Œç›‘ç®¡ã€‚

å¦‚æžœå°†æ¥å†æ¬¡éœ€è¦çœŸæ­£çš„å­è¿›ç¨‹æ¨¡å¼ï¼Œå®ƒåº”è¯¥è¢«è®°å½•ä¸º
å•ç‹¬çš„ã€æ˜Žç¡®çš„ä»…å¼€å‘æ¨¡å¼ã€‚

